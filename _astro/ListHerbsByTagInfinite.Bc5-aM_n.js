import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Dy6lLLXr.js";import{I,L as S,a as w,d as L,F as b}from"./FetchRepository.BdM0_wA2.js";import"./_slug_.1673099a.rcQGyw0O.js";const N=({pageInfo:i,tagSlug:c})=>{const[m,p]=s.useState([]),[C,d]=s.useState(1),[n,l]=s.useState(!0),[u,g]=s.useState(i.endCursor),[f,r]=s.useState(!1),h=async()=>{r(!0);try{const x=await fetch("https://cauldi.com/staticql.config.json").then(t=>t.json()),o=await L(x)({repository:new b("https://cauldi.com/")}).from("herbs").where("tagSlugs","eq",c).cursor(u).pageSize(6).orderBy("updatedAt","desc").exec(),j=Object.entries(o.data).map(([t,e])=>({key:t,displayName:e.name,images:[{path:`/images/herbs/${e.slug}/thumbnail.webp`,label:e.name}],link:`/herbs/${t}/`,content:e.tags?.map(y=>y.name).join("ãƒ»")??"",updatedAt:e.updatedAt}));g(o.pageInfo.endCursor),l(o.pageInfo.hasNextPage),p(t=>[...t,...j]),d(t=>t+1)}finally{r(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx(I,{items:m,loadMore:h,hasMore:n,ItemComponent:S}),a.jsx(w,{loading:f&&n})]})};export{N as default};
