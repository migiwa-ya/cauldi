import{j as f}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Dy6lLLXr.js";import{I as g,L as b,d as j,F as x}from"./FetchRepository.1WWb2Jss.js";import"./_slug_.1673099a.nYYm6jrm.js";const L=({pageInfo:a})=>{const[r,n]=s.useState([]),[I,i]=s.useState(1),[p,c]=s.useState(!0),[m,u]=s.useState(a.endCursor),d=async()=>{const l=await fetch("/staticql.config.json").then(e=>e.json()),o=await j(l)({repository:new x("https://cdn.cauldi.com/")}).from("reports").join("herbs").join("reportGroup").join("process").cursor(m).pageSize(6).orderBy("updatedAt","desc").exec(),h=o.data.map(e=>({key:e.slug,displayName:e.herbs?.map(t=>t.name)?.join("・")+"の"+e.process?.name+"の作り方",images:(e.reportGroup?.combinedHerbs.map(t=>t.slug)??[]).map(t=>({path:`/images/herbs/${t}/thumbnail.webp`,label:t})),link:`/reports/${e.reportGroupSlug}/`,content:"Report:"+e.herbs?.map(t=>t.name),updatedAt:e.updatedAt}));u(o.pageInfo.endCursor),c(o.pageInfo.hasNextPage),n(e=>[...e,...h]),i(e=>e+1)};return f.jsx(g,{items:r,loadMore:d,hasMore:p,ItemComponent:b})};export{L as default};
