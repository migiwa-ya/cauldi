import{j as x}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Dy6lLLXr.js";import{I,L as j,d as y,F as S}from"./FetchRepository.1WWb2Jss.js";import"./_slug_.1673099a.nYYm6jrm.js";const H=({pageInfo:o,tagSlug:n})=>{const[r,i]=s.useState([]),[w,c]=s.useState(1),[m,p]=s.useState(!0),[u,d]=s.useState(o.endCursor),l=async()=>{const f=await fetch("https://cauldi.com/staticql.config.json").then(t=>t.json()),a=await y(f)({repository:new S("https://cauldi.com/")}).from("herbs").where("tagSlugs","eq",n).cursor(u).pageSize(6).orderBy("updatedAt","desc").exec(),g=Object.entries(a.data).map(([t,e])=>({key:t,displayName:e.name,images:[{path:`/images/herbs/${e.slug}/thumbnail.webp`,label:e.name}],link:`/herbs/${t}/`,content:e.tags?.map(h=>h.name).join("ãƒ»")??"",updatedAt:e.updatedAt}));d(a.pageInfo.endCursor),p(a.pageInfo.hasNextPage),i(t=>[...t,...g]),c(t=>t+1)};return x.jsx(I,{items:r,loadMore:l,hasMore:m,ItemComponent:j})};export{H as default};
