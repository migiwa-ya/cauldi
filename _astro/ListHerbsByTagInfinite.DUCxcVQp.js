import{j as o}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Dy6lLLXr.js";import{I,L as j,d as y,F as S}from"./FetchRepository.Dq_N3KNO.js";import"./_slug_.1673099a.rcQGyw0O.js";const F=({pageInfo:n,tagSlug:r})=>{const[i,c]=s.useState([]),[w,m]=s.useState(1),[p,u]=s.useState(!0),[d,g]=s.useState(n.endCursor),l=async()=>{const f=await fetch("/staticql.config.json").then(t=>t.json()),a=await y(f)({repository:new S("/")}).from("herbs").where("tagSlugs","eq",r).cursor(d).pageSize(6).orderBy("updatedAt","desc").exec(),h=Object.entries(a.data).map(([t,e])=>({key:t,displayName:e.name,images:[{path:`/images/herbs/${e.slug}/thumbnail.webp`,label:e.name}],link:`/herbs/${t}/`,content:e.tags?.map(x=>x.name).join("ãƒ»")??"",updatedAt:e.updatedAt}));g(a.pageInfo.endCursor),u(a.pageInfo.hasNextPage),c(t=>[...t,...h]),m(t=>t+1)};return o.jsx(o.Fragment,{children:o.jsx(I,{items:i,loadMore:l,hasMore:p,ItemComponent:j})})};export{F as default};
