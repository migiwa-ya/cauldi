import{j as f}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Dy6lLLXr.js";import{I as g,L as b,d as j,F as x}from"./FetchRepository.1WWb2Jss.js";import"./_slug_.1673099a.nYYm6jrm.js";const L=({pageInfo:a})=>{const[r,n]=s.useState([]),[I,i]=s.useState(1),[p,c]=s.useState(!0),[m,u]=s.useState(a.endCursor),d=async()=>{const l=await fetch("https://cauldi.com/staticql.config.json").then(t=>t.json()),o=await j(l)({repository:new x("https://cauldi.com/")}).from("reports").join("herbs").join("reportGroup").join("process").cursor(m).pageSize(6).orderBy("updatedAt","desc").exec(),h=o.data.map(t=>({key:t.slug,displayName:t.herbs?.map(e=>e.name)?.join("・")+"の"+t.process?.name+"の作り方",images:(t.reportGroup?.combinedHerbs.map(e=>e.slug)??[]).map(e=>({path:`/images/herbs/${e}/thumbnail.webp`,label:e})),link:`/reports/${t.reportGroupSlug}/`,content:"Report:"+t.herbs?.map(e=>e.name),updatedAt:t.updatedAt}));u(o.pageInfo.endCursor),c(o.pageInfo.hasNextPage),n(t=>[...t,...h]),i(t=>t+1)};return f.jsx(g,{items:r,loadMore:d,hasMore:p,ItemComponent:b})};export{L as default};
