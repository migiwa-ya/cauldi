import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.Dy6lLLXr.js";import{I as g,L as j,d as x,F as b}from"./FetchRepository.Dq_N3KNO.js";import"./_slug_.1673099a.rcQGyw0O.js";const L=({pageInfo:r})=>{const[n,i]=s.useState([]),[I,p]=s.useState(1),[c,m]=s.useState(!0),[u,d]=s.useState(r.endCursor),l=async()=>{const h=await fetch("/staticql.config.json").then(e=>e.json()),o=await x(h)({repository:new b("/")}).from("reports").join("herbs").join("reportGroup").join("process").cursor(u).pageSize(6).orderBy("updatedAt","desc").exec(),f=o.data.map(e=>({key:e.slug,displayName:e.herbs?.map(t=>t.name)?.join("・")+"の"+e.process?.name+"の作り方",images:(e.reportGroup?.combinedHerbs.map(t=>t.slug)??[]).map(t=>({path:`/images/herbs/${t}/thumbnail.webp`,label:t})),link:`/reports/${e.reportGroupSlug}/`,content:"Report:"+e.herbs?.map(t=>t.name),updatedAt:e.updatedAt}));d(o.pageInfo.endCursor),m(o.pageInfo.hasNextPage),i(e=>[...e,...f]),p(e=>e+1)};return a.jsx(a.Fragment,{children:a.jsx(g,{items:n,loadMore:l,hasMore:c,ItemComponent:j})})};export{L as default};
